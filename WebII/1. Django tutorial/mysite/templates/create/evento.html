{% extends "base/base.html" %}
{% load static %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'css/create/evento.css' %}">
{% endblock %}

{%block content %}

<div class="form-container">
    <h1>Agregar evento</h1>

    <div class="form">
        <form method="POST" action="" id="create-evento-form">
            <input type="hidden" id="csrf_token" value="{{csrf_token}}">
            <label for="name">Nombre evento:</label><br>
            <input type="text" id="name" name="name" placeholder="Nombre evento" required><br>
    
            <label for="fecha-inicio">Fecha inicio:</label><br>
            <input type="datetime-local" id="fecha-inicio" name="fecha-inicio" required><br>
    
            <label for="fecha-fin">Fecha final:</label><br>
            <input type="datetime-local" id="fecha-fin" name="fecha-fin" required><br>
    
            <label for="localidad">Localidad:</label><br>
            <select id="localidad" name="localidad" required>
                {% for item in localidades %}
                    <option value={{item.name}}>{{item.name}}</option>
                {% endfor %}
            </select><br>
    
            <button id="create-evento-button">Agregar</button>
        </form>
    </div>

</div>

<div class="eventos-agregados">
    <h1>Eventos agregado recientemente</h1>

    <table>
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Fecha inicio</th>
                <th>Fecha fin</th>
                <th>Localidad</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for item in eventos_recientes %}
            <tr>
                <td>{{ item.evento.name }}</td>
                <td>{{ item.evento.fecha_inicio }}</td>
                <td>{{ item.evento.fecha_fin }}</td>
                <td id="localidad-{{forloop.counter}}">{{ item.localidad.name }}</td>
                <td><button id="eliminar-btn" data-id="{{ item.evento.id }}">Eliminar</button></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>

{% endblock %}

{% block scripts %}
        <script>
            const EVENT_CREATE_URL = "{% url 'createEventoByFetch' %}";
            const EVENT_DELETE_URL = "{% url 'deleteEventoByFetch' %}";
        </script>
        <script src="{% static 'js/eventos.js' %}"></script>
{% endblock %}