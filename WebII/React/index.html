<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone"></script>
    <script type="text/babel" src="context/count-context.js"></script>
</head>
<body>
    <div id="root">

    </div>
</body>

<script type="text/babel">

    const {createContext, useState} = React;
    //const CountContext = createContext(null);
    const {CountContext, CountContextProvider} = window
    const UserContext = createContext(null);

    function App(){
        const [count, setCount] = useState(0);
        const [countRestar, setCountRestar] = useState(0);
        const [user, setUser] = useState({
            name: "Ceviche",
            age: 2,
            email: "ceviche@elcamaron"
        })
        return(
            <div>
                <CountContextProvider value={{count, setCount, countRestar, setCountRestar}}>
                    <Component1 />
                    <Component2 />
                </CountContextProvider>

                <UserContext.Provider value={{user, setUser}}>
                    <ProfileUser />
                    <SearchUser />
                </UserContext.Provider>

            </div>
        );
    }

    function ProfileUser(){
        const {user, setUser} = React.useContext(UserContext);
        return(
            <div>
                <div>
                    <h2>Perfil de Usuario</h2>
                    <p>Nombre: {user.name}</p>
                    <p>Edad: {user.age}</p>
                    <p>Email: {user.email}</p>
                </div>
            </div>
        )
    }

    function SearchUser(){
        const {user, setUser} = React.useContext(UserContext);
        return(
            <div>
                <label>Nombre a buscar</label>
                <input value={user.name} onChange={buscarUsuario} />

                <label>Edad a buscar</label>
                <input value={user.age} />

                <label>Email a buscar</label>
                <input value={user.email} />
            </div>
        )
    }

    function buscarUsuario(event){
        const {user, setUser} = React.useContext(UserContext);
        console.log(event.target.value);
        setUser({
            name: event.target.value,
            age: user.age,
            email: user.email
        })
    }

    function Component1(){
        const {count, setCount} = React.useContext(CountContext);
        console.log("Render de componenete 1")
        return(
            <div>
                <h2>Componente 1</h2>
                <button onClick={() => setCount(count + 1)}>Incrementar</button>
                <p>Contador: {count}</p>
            </div>
        );
    }

    function Component2(){
        const {countRestar, setCountRestar} = React.useContext(CountContext);
        console.log("Render de componenete 2")
        return(
            <div>
                <h2>Componente 2</h2>
                <button onClick={() => setCountRestar(countRestar - 1)}>Restar</button>
                <p>Contador: {countRestar}</p>
            </div>
        );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>

</html>